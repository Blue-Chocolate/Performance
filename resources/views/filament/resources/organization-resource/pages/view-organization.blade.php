<x-filament-panels::page class="space-y-6">
    <div class="text-2xl font-bold">{{ $organization->name }}</div>

    <div class="grid grid-cols-2 gap-6">
        <div>
            <span class="font-medium text-gray-700">Sector:</span>
            <p>{{ $organization->sector ?? 'N/A' }}</p>
        </div>
        <div>
            <span class="font-medium text-gray-700">Final Score:</span>
            <p>{{ $organization->final_score ?? 'Not graded yet' }}</p>
        </div>
    </div>

    <hr class="my-6">

    <h2 class="text-lg font-semibold">Axes Responses</h2>

    @php
        // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒÙ„ Ù…Ø­ÙˆØ±
        $axisQuestions = [
            1 => [
                'Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø®Ø·Ø© Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ÙˆØ§Ø¶Ø­Ø© ÙˆØ·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰ØŸ',
                'Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ø¥Ø´Ø±Ø§Ù ÙˆØªÙˆØ¬ÙŠÙ‡ ÙØ¹Ù‘Ø§Ù„ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù†Ø¬Ø§Ø­ ÙÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°ØŸ',
                'Ù‡Ù„ ÙŠØªÙ… ØªØ¯Ø±ÙŠØ¨ ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¦Ù‡Ù…ØŸ',
                'Ù‡Ù„ ÙŠØªÙ… Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø¹Ù„Ù…ÙŠØŸ'
            ],
            2 => [
                'Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø®Ø·Ø© Ù…Ø§Ù„ÙŠØ© Ù…Ø³ØªØ¯Ø§Ù…Ø© ØªØ¶Ù…Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ØªÙ…ÙˆÙŠÙ„ØŸ',
                'Ù‡Ù„ Ù…ØµØ§Ø¯Ø± Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ù…ØªÙ†ÙˆØ¹Ø© (ØªØ¨Ø±Ø¹Ø§ØªØŒ Ù…Ù†Ø­ØŒ Ø±Ø¹Ø§Ø©ØŒ Ø¥Ù„Ø®)ØŸ',
                'Ù‡Ù„ ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø§Ù„ÙŠØ© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ ÙˆØªØ¯Ù‚ÙŠÙ‚Ù‡Ø§ Ø¨Ø§Ù†ØªØ¸Ø§Ù…ØŸ',
                'Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ø´ÙØ§ÙÙŠØ© ÙˆØ§Ù„Ù…Ø³Ø§Ø¡Ù„Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©ØŸ'
            ],
            3 => [
                'Ù‡Ù„ ÙŠØªÙ… Ø¥Ø´Ø±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ÙÙŠ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆØ§Ù„Ø¨Ø±Ø§Ù…Ø¬ØŸ',
                'Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ù†Ø¸Ø§Ù… Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØŸ',
                'Ù‡Ù„ ØªØ¹ØªÙ…Ø¯ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø¹Ù„Ù‰ ØªÙ…ÙˆÙŠÙ„ Ù…Ø³ØªØ¯Ø§Ù… Ø£Ùˆ Ù‚Ø§Ø¯Ø±Ø© Ø¹Ù„Ù‰ ØªØ£Ù…ÙŠÙ† Ù…ØµØ§Ø¯Ø± Ø¯Ø®Ù„ Ù…ØªØ¬Ø¯Ø¯Ø©ØŸ',
                'Ù‡Ù„ ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ø§Ù„Ø´Ø±Ø§ÙƒØ§Øª Ù…Ø¹ Ù…Ù†Ø¸Ù…Ø§Øª Ø£Ø®Ø±Ù‰ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ø´ØªØ±ÙƒØ©ØŸ'
            ],
            4 => [
                'Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø®Ø·Ø© Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ÙƒØªÙˆØ¨Ø© Ù…Ø¹ ØªÙˆØ«ÙŠÙ‚ Ù„Ù„Ø£Ù‡Ø¯Ø§Ù Ù‚ØµÙŠØ±Ø© ÙˆØ·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰ØŸ',
                'Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© ØªÙ‚Ø§Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø·Ø·ØŸ',
                'Ù‡Ù„ ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…Ø¤Ø´Ø±Ø§Øª Ø£Ø¯Ø§Ø¡ Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs) Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„Ù†Ø¬Ø§Ø­ØŸ',
                'Ù‡Ù„ ØªØªØ¨Ù†Ù‰ Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ÙÙŠ Ø­Ù„ÙˆÙ„Ù‡Ø§ ÙˆØ¨Ø±Ø§Ù…Ø¬Ù‡Ø§ØŸ'
            ],
        ];

        // Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª Ù„ÙƒÙ„ Ù…Ø­ÙˆØ±
        $axisAttachments = [
            1 => [
                'Ø®Ø·Ø© Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ù…ÙƒØªÙˆØ¨Ø© Ù…Ø¹ ØªÙˆØ«ÙŠÙ‚ Ù„Ù„Ø£Ù‡Ø¯Ø§Ù Ù‚ØµÙŠØ±Ø© ÙˆØ·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰.',
                'ØªÙ‚Ø§Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©.',
                'Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (KPIs) Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø¯ ÙƒÙŠÙÙŠØ© Ù‚ÙŠØ§Ø³ Ø§Ù„Ù†Ø¬Ø§Ø­.'
            ],
            2 => [
                'ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.',
                'Ø®Ø·Ø· Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§ØªÙŠØ© ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠ.',
                'Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ.'
            ],
            3 => [
                'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© (Ù„Ø¢Ø®Ø± Ø¹Ø§Ù…ÙŠÙ†).',
                'Ø´Ù‡Ø§Ø¯Ø§Øª ØªØ¯Ù‚ÙŠÙ‚ Ù…Ø§Ù„ÙŠ Ø£Ùˆ ØªÙ‚Ø§Ø±ÙŠØ± ØªØ¯Ù‚ÙŠÙ‚ Ù…Ø³ØªÙ‚Ù„.',
                'Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ù†ÙˆÙŠ Ù„Ù„Ù…Ù†Ø¸Ù…Ø©.'
            ],
            4 => [
                'Ø¯Ø±Ø§Ø³Ø§Øª Ø­Ø§Ù„Ø© ØªÙÙˆØ¶Ø­ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©.',
                'Ø§Ø³ØªØ·Ù„Ø§Ø¹Ø§Øª Ø±Ø¶Ø§ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ÙˆØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©.',
                'Ø´Ù‡Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† Ø£Ùˆ Ø´Ø±ÙƒØ§Ø¡ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠÙŠÙ† ØªØ«Ø¨Øª ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ù†Ø¸Ù…Ø©.'
            ],
        ];
    @endphp

    @forelse ($organization->axesResponses as $response)
        <div class="p-4 border rounded-xl mb-4 bg-gray-50 shadow-sm">
            <h3 class="font-semibold text-gray-800 text-lg mb-3">
                {{ $response->axis->title }}
            </h3>

            {{-- Ø§Ù„Ø£Ø³Ø¦Ù„Ø© --}}
            <ul class="space-y-3 text-gray-700">
                @foreach (range(1,4) as $i)
                    @php
                        $question = $axisQuestions[$response->axis_id][$i - 1] ?? "Question {$i}";
                        $answer = $response["q{$i}"];
                    @endphp

                    <li class="flex flex-col bg-white p-3 rounded-lg shadow-sm border border-gray-100">
                        <span class="font-medium text-gray-800">{{ $question }}</span>
                        <span class="mt-1 text-sm {{ $answer ? 'text-green-600' : 'text-red-500' }}">
                            {{ $answer ? 'âœ… Ù†Ø¹Ù…' : 'âŒ Ù„Ø§' }}
                        </span>
                    </li>
                @endforeach
            </ul>

            {{-- Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª --}}
            <div class="mt-5 space-y-2">
                @foreach (['attachment_1', 'attachment_2', 'attachment_3'] as $index => $file)
                    @if ($response->$file)
                        @php
                            $attachmentName = $axisAttachments[$response->axis_id][$index] ?? "ğŸ“ Ù…Ø±ÙÙ‚ Ø±Ù‚Ù… " . ($index + 1);
                        @endphp

                        <a href="{{ \Illuminate\Support\Facades\Storage::url($response->$file) }}" 
                           class="text-primary-600 block hover:underline" target="_blank">
                            ğŸ“ {{ $attachmentName }}
                        </a>
                    @endif
                @endforeach
            </div>

            {{-- ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø¯ÙŠØ± --}}
            <div class="mt-5">
                <form wire:submit.prevent="updateScore({{ $response->id }})" class="flex items-center space-x-2">
                    <label class="text-sm font-medium">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</label>
                    <input type="number" 
                           wire:model.defer="responses.{{ $response->id }}.admin_score"
                           class="border rounded p-1 w-24"
                           min="0" max="100" />
                    <button type="submit" 
                            class="px-3 py-1 bg-primary-600 text-white rounded hover:bg-primary-700 transition">
                        Ø­ÙØ¸
                    </button>
                </form>

                @if ($response->admin_score)
                    <p class="mt-2 text-sm text-green-600">
                        Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ: {{ $response->admin_score }}/100
                    </p>
                @endif
            </div>
        </div>
    @empty
        <p class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª Ø¨Ø¹Ø¯.</p>
    @endforelse
</x-filament-panels::page>
